<template name="currencyInfo">
  <div class="card currency-info">
    <div class="currency-brand-container pull-left">
      <div class="currency-brand pull-left">
        <img class="currency-logo changeCoinImage pointer" src="{{doesCoinImageExist currencyLogoFilename}}" alt="{{currencyName}}" title="click to change coin image">
        <input type="hidden" value="{{currencyLogoFilenam}}" id="currencyLogoFilename_existing">
        <div class="name d-sm-block">{{currencyName}} {{#with thiscurrency}}({{currencySymbol}}) {{/with}}</div>
      </div>
    </div>
  </div>
  <br/>
  <div class="card currency-info-basic">
    <div class="header">
      {{#if smartContractURL}}
      {{_ "currency.info.smart_contract"}}
      {{else}}
      {{_ "currency.info.blockchain_details"}}
      {{/if}}
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div class="basic-details">
          <div class="border-secondary mb-3 mb-3" style="min-width:100px;">
            <div class="card-body" style="display:{{bodydisplay}};">
              <input type="hidden" id="_id" value="{{_id}}">
              <input type="hidden" id="name" value="{{currencyName}}">

              <ul class="nav nav-tabs">
                  <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#compendiumtab">{{_ "currency.info.compendium"}}</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#informationtab">{{_ "currency.info.basics"}}</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#technologicaltab">{{_ "currency.info.tech"}}</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#exchangestab">{{_ "currency.info.exchanges"}}</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#repostab">{{_ "currency.info.related_repos"}}</a>
                  </li>
                </ul>
                <div id="currencyTabContent" class="tab-content">
                  <div class="tab-pane fade show active" id="compendiumtab">
                    <br/>
                    <div class="row">
                        <div class="col-md-4">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.wallet_ranking"}}</div>
                            <div class="value" id="walletRanking">{{isNullReadOnly walletRanking}}</div>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.price"}}</div>
                            <div class="value" id="price">{{isNullDollar price}}</div>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.cpc"}}</div>
                            <div class="value" id="cpc">{{isNullDollar cpc}}</div>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.cpt"}}</div>
                            <div class="value" id="cpt">{{isNullDollar cpt}}</div>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.market"}}</div>
                            <div class="value" id="marketCap">{{isNullReadOnly marketCap}}</div>
                          </div>
                        </div>
                    </div>
                  </div>
                  <div class="tab-pane fade" id="informationtab">
                    <br/>
                    <div class="row">
                        <div class="col-md-4 col-lg-3">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.name"}}</div>
                            <div class="value" id="currencyName">{{isNull currencyName}}</div>
                          </div>
                        </div>
                        <div class="col-md-4 col-lg-3">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.symbol"}}</div>
                            <div class="value" id="currencySymbol">{{isNull currencySymbol}}</div>
                          </div>
                        </div>
                        <div class="col-md-4 col-lg-3">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.genesis"}}</div>
                            <div class="value" id="genesisTimestamp">{{isDateNull genesisTimestamp}}</div>
                          </div>
                        </div>
                        <div class="col-md-4 col-lg-3">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.premine"}}</div>
                            <div class="value" id="premine">{{isNull premine}}</div>
                          </div>
                        </div>
                        <div class="col-md-4 col-lg-3">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.circulating"}}</div>
                            <div class="value" id="circulating">{{isNullReadOnly circulating}}</div>
                          </div>
                        </div>
                        <div class="col-md-4 col-lg-3">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.max"}}</div>
                            <div class="value" id="maxCoins">{{isNullReadOnly maxCoins}}</div>
                          </div>
                        </div>
                        <div class="col-md-4 col-lg-3">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.previous"}}</div>
                            <div class="value" id="previousNames">{{previousNames}}</div>
                          </div>
                        </div>
                    </div>
                  </div>
                  <div class="tab-pane fade" id="technologicaltab">
                    <br/>
                    <div class="row">
                        <div class="col-md-4">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.consensus"}}</div>
                            <div class="value" id="consensusSecurity">{{isNull consensusSecurity}}</div>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.hashAlgo"}}</div>
                            <div class="value" id="hashAlgorithm">{{isNull hashAlgorithm}}</div>
                            <a style="display: {{showText}}" href="#" id="js-add">{{_ "currency.info.add_hashAlgo"}}</a>
                            <div style="display: {{newAlgo}}"><input type="text" id="js-newAlgo" placeholder='{{_ "currency.info.name_hashAlgo"}}' />
                            <button class="btn btn-primary btn-sm" id="js-addAlgo"><i class="fa fa-check"></i></button><button type="button" class="btn btn-default btn-sm" id="js-cancel"><i class="fa fa-times"></i></button></div>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.website"}}</div>
                            <div class="value" id="officialSite">{{isNull officialSite}}</div>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.repo"}}</div>
                            <div class="value" id="gitRepo">{{isNull gitRepo}}</div>
                          </div>
                        </div>
                        <div class="col-md-4">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.git"}}</div>
                            <div class="value" id="gitUpdate">{{isNullReadOnly gitUpdate}}</div>
                          </div>
                        </div>
                        {{#if smartContractURL}}
                        <div class="col-md-4">
                          <div class="card card-header">
                            <div class="title">{{_ "currency.info.sc_url"}}</div>
                            <div class="value" id="smartContractURL">{{isNull smartContractURL}}</div>
                          </div>
                        </div>
                        {{/if}}
                    </div>
                  </div>
                  <div class="tab-pane fade" id="exchangestab">
                    <br/>
                    <div class="row">
                      <div class="addExchanges">
                        {{> typeahead typeaheadProps}}
                      </div>
                    </div>
                    <br/>
                    <div class="row">
                         {{#if exchanges}}
              {{#each exchanges}}
                        <div class="col-md-4">
                          <div class="card exchange-card card-header">
                            <div class="row">
                              <button type="button" class="col-2 fa fa-times-circle untagExchange pull-right" data-id="{{_id}}" title='{{_ "currency.info.remove_exchange"}}'></button>
                              <span class="col-10 title">{{name}}</span>
                            </div>
                          </div>
                        </div>
              {{/each}}

          {{else}}
            {{_ "currency.info.no_exchanges"}}
          {{/if}}

                    </div>
                  </div>
                  <div class="tab-pane fade" id="repostab">
                    <br/>
                    <div class="row">
                      {{#if gitStats}}
                        <div class="col-md-12">
                          <div class="card card-header">
                            <div class="title">Git stats</div>
                            <div class="value">
                              {{_ "currency.info.related"}}: <b>{{isNullReadOnly gitStats.related}}</b><br />
                              {{_ "currency.info.watchers_all"}}: <b>{{isNullReadOnly gitStats.watchers}}</b><br />
                              {{_ "currency.info.likes"}}: <b>{{isNullReadOnly gitStats.likes}}</b><br />
                              {{_ "currency.info.watchers_avg"}}: <b>{{isNullReadOnly gitStats.avgWatchers}}</b><br />
                              {{_ "currency.info.top_langs"}}: <b>{{topLangs}}</b>
                            </div>
                          </div>
                        </div>
                      {{/if}}
                      {{#if relatedRepos.length}}
                        {{#each relatedRepos}}
                        <div class="col-md-4">
                          <div class="card card-header">
                            <div class="title"><a target="_blank" href="{{html_url}}">{{name}}</a>{{#if fork}}<i class="fa fa-code-fork" aria-hidden="true"></i>{{/if}}</div>
                            <div class="value">
                              {{_ "currency.info.stargazers"}}: <b>{{isNullReadOnly stargazers_count}}</b><br />
                              {{_ "currency.info.watchers"}}: <b>{{isNullReadOnly watchers_count}}</b><br />
                              {{_ "currency.info.language"}}: <b>{{isNullReadOnly language}}</b><br />
                              {{_ "currency.info.fork_count"}}: <b>{{isNullReadOnly forks_count}}</b><br />
                              {{_ "currency.info.last_update"}}: <b>{{formatDate updated_at}}</b>
                            </div>
                          </div>
                        </div>
                        {{/each}}
                        {{#if reposHasMore}}<a class="btn btn-secondary pull-right" id="js-show-more">{{_ "currency.info.show_more"}}</a>{{/if}}
                      {{else}}
                        <h4>{{_ "currency.info.no_related_repos"}}</h4>
                      {{/if}}
                    </div>
                  </div>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modals -->

  <div class="modal" id="coinChangeImage">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">{{_ "currency.info.image_change"}}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>
            <div class="logo-upload">
              <h5>{{_ "currency.info.new_logo"}}</h5>
              <label class="btn btn-primary" for="currencyLogoInput" id="currencyLogoInputLabel">
                <input id="currencyLogoInput" type="file" style="display:none" onchange="$('#fileInfo2').html(this.files[0].name)"> <span id="fileUploadValue">{{_ "currency.info.upload"}}</span>
              </label>
              <span class='label label-info' id="fileInfo2"></span>
              <input type='hidden' id='currencyLogoFilename'>
            </div>
            <br /><br />
            <input id="imageCurrencyNotes" type="text" placeholder='{{_ "currency.info.notes"}}' style="width:100%" class="form-control">
            <input id="coinModal_field" type="hidden">
            <input id="coinModal_old" type="hidden">
            <input id="coinModal_new" type="hidden">
          </p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" id="proposeCoinChange">{{_ "currency.info.save"}}</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">{{_ "currency.info.close"}}</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="coinChangeModal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">{{_ "currency.info.propose_change"}}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>{{_ "currency.info.are_you_sure"}} <span class="text-primary" id="from"></span> {{_ "currency.info.to"}} <span class="text-primary" id="to"></span> {{_ "currency.info.for"}} <span class="text-primary" id="forField"></span>
            <br /><br />
            <input id="currencyNotes" type="text" placeholder='{{_ "currency.info.notes"}}' style="width:100%" class="form-control">
          </p>
          <input id="modal_field" type="hidden">
            <input id="modal_old" type="hidden">
            <input id="modal_new" type="hidden">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" id="proposeChange">{{_ "currency.info.save"}}</button>
          <button type="button" class="btn btn-secondary" id="cancelChange" data-dismiss="modal">{{_ "currency.info.close"}}</button>
        </div>
      </div>
    </div>
  </div>
</template>
